// ==UserScript==
// @name         DnDBeyond Campage Share Helper
// @namespace    http://tampermonkey.net/
// @version      1.8
// @description  automatically kicks characters that are inside a campagne for too long
// @author       Linkally
// @match        https://www.dndbeyond.com/campaigns/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=dndbeyond.com
// @updateURL    https://github.com/Linkaly/DnDBeyondShareHelper/raw/main/DnDBeyondShareHelper.user.js
// @downloadURL  https://github.com/Linkaly/DnDBeyondShareHelper/raw/main/DnDBeyondShareHelper.user.js
// @grant        GM_setValue
// @grant        GM_getValue
// ==/UserScript==

(function() {
    'use strict';

    let DmNameElements = document.getElementsByClassName("ddb-campaigns-detail-dm-info-name-primary");
    if(DmNameElements.length == 0)
    {
        return;
    }
    let UserNameElements = document.getElementsByClassName("user-interactions-profile-nickname");
    if(UserNameElements.length == 0)
    {
        return;
    }

    if(DmNameElements[0].innerHTML != UserNameElements[0].innerHTML)
    {
        return;
    }

    function insertAfter(referenceNode, newNode) {
        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
    }

    let element = document.getElementsByClassName("ddb-campaigns-detail-body-listing")[0];

    let div1 = document.createElement("div");
    div1.setAttribute("id", "ShareHelper");
    element.insertBefore(div1, element.children[0]);

    let div2 = document.createElement("div");
    div2.setAttribute("class", "line marginTop20 marginBottom20");
    element.insertBefore(div2, element.children[0]);

    var app=function(){"use strict";function e(){}function t(e){return e()}function l(){return Object.create(null)}function n(e){e.forEach(t)}function s(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e){return null==e?"":e}function c(e,t){e.appendChild(t)}function a(e,t,l){e.insertBefore(t,l||null)}function r(e){e.parentNode.removeChild(e)}function u(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function d(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function m(){return f(" ")}function p(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function h(e,t,l){null==l?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function g(e,t){e.value=null==t?"":t}function y(e,t,l,n){e.style.setProperty(t,l,n?"important":"")}let k;function b(e){k=e}function w(e){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.on_mount.push(e)}const z=[],x=[],S=[],$=[],A=Promise.resolve();let E=!1;function C(e){S.push(e)}let _=!1;const D=new Set;function I(){if(!_){_=!0;do{for(let e=0;e<z.length;e+=1){const t=z[e];b(t),N(t.$$)}for(z.length=0;x.length;)x.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];D.has(t)||(D.add(t),t())}S.length=0}while(z.length);for(;$.length;)$.pop()();E=!1,_=!1,D.clear()}}function N(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const T=new Set;const M="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function B(e,t){-1===e.$$.dirty[0]&&(z.push(e),E||(E=!0,A.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function J(i,o,c,a,u,d,f=[-1]){const m=k;b(i);const p=o.props||{},h=i.$$={fragment:null,ctx:null,props:d,update:e,not_equal:u,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:l(),dirty:f,skip_bound:!1};let v=!1;if(h.ctx=c?c(i,p,(e,t,...l)=>{const n=l.length?l[0]:t;return h.ctx&&u(h.ctx[e],h.ctx[e]=n)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](n),v&&B(i,e)),t}):[],h.update(),v=!0,n(h.before_update),h.fragment=!!a&&a(h.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);h.fragment&&h.fragment.l(e),e.forEach(r)}else h.fragment&&h.fragment.c();o.intro&&((g=i.$$.fragment)&&g.i&&(T.delete(g),g.i(y))),function(e,l,i){const{fragment:o,on_mount:c,on_destroy:a,after_update:r}=e.$$;o&&o.m(l,i),C(()=>{const l=c.map(t).filter(s);a?a.push(...l):n(l),e.$$.on_mount=[]}),r.forEach(C)}(i,o.target,o.anchor),I()}var g,y;b(m)}const{document:R}=M;function H(e,t,l){const n=e.slice();return n[47]=t[l],n[49]=l,n}function L(e,t,l){const n=e.slice();return n[50]=t[l],n[49]=l,n}function O(e,t,l){const n=e.slice();return n[50]=t[l],n[49]=l,n}function j(e){let t,l,n,s,i,u,g,y=e[50]+"";function k(...t){return e[21](e[50],...t)}return{c(){t=d("tr"),l=d("td"),n=f(y),i=m(),h(l,"class",s=o(e[5]==e[50]?"selectedRow":"")+" svelte-mlzco"),h(t,"class","svelte-mlzco")},m(e,s){a(e,t,s),c(t,l),c(l,n),c(t,i),u||(g=p(l,"click",k),u=!0)},p(t,i){e=t,1&i[0]&&y!==(y=e[50]+"")&&v(n,y),33&i[0]&&s!==(s=o(e[5]==e[50]?"selectedRow":"")+" svelte-mlzco")&&h(l,"class",s)},d(e){e&&r(t),u=!1,g()}}}function G(e){let t,l,n,s,i,u,g,y=e[50]+"";function k(...t){return e[24](e[50],...t)}return{c(){t=d("tr"),l=d("td"),n=f(y),i=m(),h(l,"class",s=o(e[6]==e[50]?"selectedRow":"")+" svelte-mlzco"),h(t,"class","svelte-mlzco")},m(e,s){a(e,t,s),c(t,l),c(l,n),c(t,i),u||(g=p(l,"click",k),u=!0)},p(t,i){e=t,1&i[0]&&y!==(y=e[50]+"")&&v(n,y),65&i[0]&&s!==(s=o(e[6]==e[50]?"selectedRow":"")+" svelte-mlzco")&&h(l,"class",s)},d(e){e&&r(t),u=!1,g()}}}function V(e){let t,l,n,s,i,o,u,p=e[47].timesSeen+"",g=e[47].name+"";return{c(){t=d("tr"),l=d("td"),n=f(p),s=m(),i=d("td"),o=f(g),u=m(),h(l,"class","svelte-mlzco"),h(i,"class","svelte-mlzco"),h(t,"class","svelte-mlzco")},m(e,r){a(e,t,r),c(t,l),c(l,n),c(t,s),c(t,i),c(i,o),c(t,u)},p(e,t){1&t[0]&&p!==(p=e[47].timesSeen+"")&&v(n,p),1&t[0]&&g!==(g=e[47].name+"")&&v(o,g)},d(e){e&&r(t)}}}function K(t){let l,s,i,o,k,b,w,z,x,S,$,A,E,C,_,D,I,N,T,M,B,J,K,W,q,F,U,Q,X,Y,Z,ee,te,le,ne,se,ie,oe,ce,ae,re,ue,de,fe,me,pe,he,ve,ge,ye,ke,be,we,ze,xe,Se,$e,Ae,Ee,Ce,_e,De,Ie,Ne,Te,Me,Be,Je,Re,He,Le,Oe,je,Ge,Ve,Ke,Pe,We,qe=t[0].enabled?"Enabled":"Disabled",Fe=t[0].whitelist,Ue=[];for(let e=0;e<Fe.length;e+=1)Ue[e]=j(O(t,Fe,e));let Qe=t[0].blacklist,Xe=[];for(let e=0;e<Qe.length;e+=1)Xe[e]=G(L(t,Qe,e));let Ye=t[0].players,Ze=[];for(let e=0;e<Ye.length;e+=1)Ze[e]=V(H(t,Ye,e));return{c(){l=d("link"),s=m(),i=d("div"),o=d("div"),o.innerHTML='<div class="col pb-4 pt-2 svelte-mlzco"><h1 style="font-size: xx-large; text-align: center;" class="svelte-mlzco">DnD Beyond Sharing Helper</h1></div>',k=m(),b=d("div"),w=d("div"),z=d("div"),x=f("Status: \n        "),S=d("button"),$=f(qe),A=m(),E=d("div"),C=d("div"),_=d("p"),_.textContent="Whitelist:",D=m(),I=d("input"),N=m(),T=d("p"),T.textContent="slots",M=m(),B=d("div"),J=d("p"),J.textContent="Reload after:",K=m(),W=d("input"),q=m(),F=d("p"),F.textContent="minutes",U=m(),Q=d("div"),X=d("p"),X.textContent="Kick after:",Y=m(),Z=d("input"),ee=m(),te=d("p"),te.textContent="minutes",le=m(),ne=d("div"),se=d("p"),se.textContent="Kick after:",ie=m(),oe=d("input"),ce=m(),ae=d("p"),ae.textContent="days seen",re=m(),ue=d("div"),de=d("table"),fe=d("thead"),fe.innerHTML='<tr class="svelte-mlzco"><th class="svelte-mlzco">Whitelist</th></tr>',me=m(),pe=d("tbody");for(let e=0;e<Ue.length;e+=1)Ue[e].c();he=m(),ve=d("div"),ge=d("input"),ye=m(),ke=d("button"),ke.textContent="Add",be=m(),we=d("button"),we.textContent="Remove",ze=m(),xe=d("div"),Se=d("table"),$e=d("thead"),$e.innerHTML='<tr class="svelte-mlzco"><th class="svelte-mlzco">Blacklist</th></tr>',Ae=m(),Ee=d("tbody");for(let e=0;e<Xe.length;e+=1)Xe[e].c();Ce=m(),_e=d("div"),De=d("input"),Ie=m(),Ne=d("button"),Ne.textContent="Add",Te=m(),Me=d("button"),Me.textContent="Remove",Be=m(),Je=d("div"),Re=d("table"),He=d("thead"),Le=d("tr"),Oe=d("th"),Oe.textContent="Days seen",je=m(),Ge=d("th"),Ge.textContent="Name",Ve=m(),Ke=d("tbody");for(let e=0;e<Ze.length;e+=1)Ze[e].c();h(l,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap-grid.min.css"),h(l,"rel","stylesheet"),h(l,"crossorigin","anonymous"),h(l,"class","svelte-mlzco"),h(o,"class","row svelte-mlzco"),h(S,"class","svelte-mlzco"),h(z,"class","svelte-mlzco"),h(_,"class","col-5 svelte-mlzco"),h(I,"class","col-3 svelte-mlzco"),y(I,"padding","2px"),y(I,"height","18px"),y(I,"width","64px"),h(I,"type","text"),h(I,"min","0"),h(T,"class","col-4 svelte-mlzco"),h(C,"class","row pt-2 svelte-mlzco"),h(J,"class","col-5 svelte-mlzco"),h(W,"class","col-3 svelte-mlzco"),y(W,"padding","2px"),y(W,"height","18px"),y(W,"width","64px"),h(W,"type","text"),h(W,"min","0"),h(F,"class","col-4 svelte-mlzco"),h(B,"class","row py-0 svelte-mlzco"),h(X,"class","col-4 svelte-mlzco"),h(Z,"class","col-3 svelte-mlzco"),y(Z,"padding","2px"),y(Z,"height","18px"),y(Z,"width","64px"),h(Z,"type","text"),h(Z,"min","0"),h(te,"class","col-5 svelte-mlzco"),h(Q,"class","row py-0 svelte-mlzco"),h(se,"class","col-4 svelte-mlzco"),h(oe,"class","col-3 svelte-mlzco"),y(oe,"padding","2px"),y(oe,"height","18px"),y(oe,"width","64px"),h(oe,"type","text"),h(oe,"min","0"),h(ae,"class","col-5 svelte-mlzco"),h(ne,"class","row py-0 svelte-mlzco"),h(E,"class","container-fluid px-0 svelte-mlzco"),h(w,"class","col svelte-mlzco"),h(fe,"class","svelte-mlzco"),h(pe,"class","svelte-mlzco"),y(de,"width","90%"),h(de,"class","svelte-mlzco"),y(ge,"width","10px"),y(ge,"flex","auto"),h(ge,"type","text"),h(ge,"class","svelte-mlzco"),h(ke,"class","svelte-mlzco"),h(we,"class","svelte-mlzco"),y(ve,"margin-top","10px"),y(ve,"width","90%"),y(ve,"display","flex"),y(ve,"flex-direction","row"),h(ve,"class","svelte-mlzco"),h(ue,"class","col svelte-mlzco"),h($e,"class","svelte-mlzco"),h(Ee,"class","svelte-mlzco"),y(Se,"width","90%"),h(Se,"class","svelte-mlzco"),y(De,"width","10px"),y(De,"flex","auto"),h(De,"type","text"),h(De,"class","svelte-mlzco"),h(Ne,"class","svelte-mlzco"),h(Me,"class","svelte-mlzco"),y(_e,"margin-top","10px"),y(_e,"width","90%"),y(_e,"display","flex"),y(_e,"flex-direction","row"),h(_e,"class","svelte-mlzco"),h(xe,"class","col svelte-mlzco"),y(Oe,"width","30%"),h(Oe,"class","svelte-mlzco"),h(Ge,"class","svelte-mlzco"),h(Le,"class","svelte-mlzco"),h(He,"class","svelte-mlzco"),h(Ke,"class","svelte-mlzco"),y(Re,"width","100%"),h(Re,"class","svelte-mlzco"),h(Je,"class","col svelte-mlzco"),y(Je,"max-height","400px"),y(Je,"overflow-y","auto"),h(b,"class","row svelte-mlzco"),h(i,"class","container-fluid svelte-mlzco")},m(e,n){c(R.head,l),a(e,s,n),a(e,i,n),c(i,o),c(i,k),c(i,b),c(b,w),c(w,z),c(z,x),c(z,S),c(S,$),c(w,A),c(w,E),c(E,C),c(C,_),c(C,D),c(C,I),g(I,t[1]),c(C,N),c(C,T),c(E,M),c(E,B),c(B,J),c(B,K),c(B,W),g(W,t[2]),c(B,q),c(B,F),c(E,U),c(E,Q),c(Q,X),c(Q,Y),c(Q,Z),g(Z,t[3]),c(Q,ee),c(Q,te),c(E,le),c(E,ne),c(ne,se),c(ne,ie),c(ne,oe),g(oe,t[4]),c(ne,ce),c(ne,ae),c(b,re),c(b,ue),c(ue,de),c(de,fe),c(de,me),c(de,pe);for(let e=0;e<Ue.length;e+=1)Ue[e].m(pe,null);c(ue,he),c(ue,ve),c(ve,ge),g(ge,t[5]),c(ve,ye),c(ve,ke),c(ve,be),c(ve,we),c(b,ze),c(b,xe),c(xe,Se),c(Se,$e),c(Se,Ae),c(Se,Ee);for(let e=0;e<Xe.length;e+=1)Xe[e].m(Ee,null);c(xe,Ce),c(xe,_e),c(_e,De),g(De,t[6]),c(_e,Ie),c(_e,Ne),c(_e,Te),c(_e,Me),c(b,Be),c(b,Je),c(Je,Re),c(Re,He),c(He,Le),c(Le,Oe),c(Le,je),c(Le,Ge),c(Re,Ve),c(Re,Ke);for(let e=0;e<Ze.length;e+=1)Ze[e].m(Ke,null);Pe||(We=[p(S,"click",t[16]),p(I,"blur",t[7]),p(I,"keyup",P),p(I,"input",t[17]),p(W,"blur",t[8]),p(W,"keyup",P),p(W,"input",t[18]),p(Z,"blur",t[9]),p(Z,"keyup",P),p(Z,"input",t[19]),p(oe,"blur",t[10]),p(oe,"keyup",P),p(oe,"input",t[20]),p(ge,"keyup",t[22]),p(ge,"input",t[23]),p(ke,"click",t[11]),p(we,"click",t[12]),p(De,"keyup",t[25]),p(De,"input",t[26]),p(Ne,"click",t[13]),p(Me,"click",t[14]),p(Oe,"click",t[27]),p(Ge,"click",t[28])],Pe=!0)},p(e,t){if(1&t[0]&&qe!==(qe=e[0].enabled?"Enabled":"Disabled")&&v($,qe),2&t[0]&&I.value!==e[1]&&g(I,e[1]),4&t[0]&&W.value!==e[2]&&g(W,e[2]),8&t[0]&&Z.value!==e[3]&&g(Z,e[3]),16&t[0]&&oe.value!==e[4]&&g(oe,e[4]),33&t[0]){let l;for(Fe=e[0].whitelist,l=0;l<Fe.length;l+=1){const n=O(e,Fe,l);Ue[l]?Ue[l].p(n,t):(Ue[l]=j(n),Ue[l].c(),Ue[l].m(pe,null))}for(;l<Ue.length;l+=1)Ue[l].d(1);Ue.length=Fe.length}if(32&t[0]&&ge.value!==e[5]&&g(ge,e[5]),65&t[0]){let l;for(Qe=e[0].blacklist,l=0;l<Qe.length;l+=1){const n=L(e,Qe,l);Xe[l]?Xe[l].p(n,t):(Xe[l]=G(n),Xe[l].c(),Xe[l].m(Ee,null))}for(;l<Xe.length;l+=1)Xe[l].d(1);Xe.length=Qe.length}if(64&t[0]&&De.value!==e[6]&&g(De,e[6]),1&t[0]){let l;for(Ye=e[0].players,l=0;l<Ye.length;l+=1){const n=H(e,Ye,l);Ze[l]?Ze[l].p(n,t):(Ze[l]=V(n),Ze[l].c(),Ze[l].m(Ke,null))}for(;l<Ze.length;l+=1)Ze[l].d(1);Ze.length=Ye.length}},i:e,o:e,d(e){r(l),e&&r(s),e&&r(i),u(Ue,e),u(Xe,e),u(Ze,e),Pe=!1,n(We)}}}function P(e){"Enter"==e.key&&e.target.blur()}function W(e,t,l){class n{constructor(){this.timesSeen=0,this.currentlyJoinedSince=null,this.timestampDaysSeen=null}}class s{constructor(){this.version=1.8,this.enabled=!1,this.players=[],this.whitelist=[],this.blacklist=[],this.whitelistSlots=0,this.kickAfterMinutes=60,this.kickAfterTimesSeen=0,this.updateInterval=0}}let i=null,o=function(){return window.location.href.split("/")[4]};if("undefined"!=typeof GM_getValue){let e=GM_getValue(o(),"");if(""!=e){let t=JSON.parse(e);null!=t&&null!=t.version&&t.version>=1.2&&(i=t)}}null==i&&(i=new s);let c=new s;i.version<1.8&&(i.kickAfterTimesSeen=c.kickAfterTimesSeen),i.version<c.version&&(i.version=c.version);let a=function(e){let t=[];for(let l=0;l<e.length;l++){let n=e[l];"Unassigned"!=n&&t.push(n.split(": ")[1])}return t=[...new Set(t)],t},r=!1,u=function(e,t){let l=t[e].split(": ");l.length>=2&&(i.whitelist.includes(l[1])||function(e){if(0==r){r=!0;let t=document.getElementsByClassName("ddb-campaigns-character-card"),l=null,n=t[e].getElementsByClassName("ddb-campaigns-character-card-footer-links-item-remove");n.length>0?l=n[0]:(n=t[e].getElementsByClassName("ddb-campaigns-character-card-footer-links-item-more-remove"),n.length>0&&(l=n[0])),null!=l?l.click():console.error("DnD Beyond Share Helper: could not find the remove button for card "+e);let s=function(){let e=document.getElementsByClassName("ajax-post");e.length>0?e[0].click():setTimeout(s,500)};setTimeout(s,500)}}(e))},d=i.whitelistSlots;let f=i.updateInterval;let m=i.kickAfterMinutes;let p=i.kickAfterTimesSeen;let h="",v=function(){let e=h.replace("/s/g","");""!==e&&(i.whitelist.push(e),i.whitelist.sort(),l(0,i.whitelist=[...new Set(i.whitelist)],i),l(5,h=""))},g="",y=function(){let e=g.replace("/s/g","");""!==e&&(i.blacklist.push(e),i.blacklist.sort(),l(0,i.blacklist=[...new Set(i.blacklist)],i),l(6,g=""))},k="",b=function(e,t){return e<t?-1:e>t?1:0},z=function(e){"days"==e?"daysD"==k?(i.players.sort((function(e,t){return b(e.timesSeen,t.timesSeen)})),k="daysA"):(i.players.sort((function(e,t){return b(t.timesSeen,e.timesSeen)})),k="daysD"):"name"==e&&("nameA"==k?(i.players.sort((function(e,t){return b(t.name,e.name)})),k="nameD"):(i.players.sort((function(e,t){return b(e.name,t.name)})),k="nameA")),l(0,i)};w(()=>{let e=function(){let e=document.getElementsByClassName("ddb-campaigns-character-card"),t=[];for(let l=0;l<e.length;l++){let n=e[l].getElementsByClassName("ddb-campaigns-character-card-header-upper-character-info-secondary")[1].innerHTML;t.push(n)}return t}();!function(e){for(let t=0;t<e.length;++t){if(i.players.findIndex(l=>l.name==e[t])<0){let l=new n;l.timesSeen=1,l.currentlyJoinedSince=Date.now(),l.timestampDaysSeen=Date.now(),l.name=e[t],i.players.push(l)}}for(let t=0;t<i.players.length;++t)e.includes(i.players[t].name)?(Date.now()-i.players[t].timestampDaysSeen>828e5&&(l(0,i.players[t].timestampDaysSeen=Date.now(),i),l(0,i.players[t].timesSeen=i.players[t].timesSeen+1,i)),null===i.players[t].currentlyJoinedSince&&l(0,i.players[t].currentlyJoinedSince=Date.now(),i)):l(0,i.players[t].currentlyJoinedSince=null,i);l(0,i)}(a(e)),i.enabled&&(function(e){if(1!=r)for(let t=0;t<e.length;++t){let l=e[t].split(": ");if(l.length>=2&&i.blacklist.includes(l[1])&&(u(t,e),r=!!r,1==r))return}}(e),function(e){if(!(1==r||i.kickAfterTimesSeen<=0))for(let t=0;t<e.length;++t){let l=e[t].split(": ");if(l.length>=2){let n=i.players.findIndex(e=>e.name==l[1]);if(n>=0&&i.players[n].timesSeen>=i.kickAfterTimesSeen&&(u(t,e),r=!!r,1==r))return}}}(e),function(e){if(!(1==r||i.kickAfterMinutes<=0))for(let t=0;t<e.length;++t){let l=e[t].split(": ");if(l.length>=2){let n=i.players.findIndex(e=>e.name==l[1]);if(n>=0&&Date.now()-i.players[n].currentlyJoinedSince>60*i.kickAfterMinutes*1e3&&(u(t,e),r=!!r,1==r))return}}}(e),function(e){if(1!=r)for(let t=0;t<e.length;++t)if(new Set(a(e)).size+i.whitelistSlots>12&&(u(t,e),r=!!r,1==r))return}(e)),z("name"),z("days");let t=Date.now();const s=setInterval(()=>{1==i.enabled&&i.updateInterval>0&&Date.now()>t+60*i.updateInterval*1e3&&location.reload()},1e4);return window.addEventListener("beforeunload",e=>{"activeElement"in document&&document.activeElement.blur(),"undefined"!=typeof GM_setValue&&GM_setValue(o(),JSON.stringify(i))}),()=>{clearInterval(s)}});return[i,d,f,m,p,h,g,function(e){let t=e.target;l(1,d=null===t.value||d<parseInt(t.min)?i.whitelistSlots:parseInt(t.value)),isNaN(d)||l(0,i.whitelistSlots=d,i),l(1,d=i.whitelistSlots)},function(e){let t=e.target;l(2,f=null===t.value||f<parseInt(t.min)?i.updateInterval:parseInt(t.value)),isNaN(f)||l(0,i.updateInterval=f,i),l(2,f=i.updateInterval)},function(e){let t=e.target;l(3,m=null===t.value||m<parseInt(t.min)?i.kickAfterMinutes:parseInt(t.value)),isNaN(m)||l(0,i.kickAfterMinutes=m,i),l(3,m=i.kickAfterMinutes)},function(e){let t=e.target;l(4,p=null===t.value||p<parseInt(t.min)?i.kickAfterTimesSeen:parseInt(t.value)),isNaN(p)||l(0,i.kickAfterTimesSeen=p,i),l(4,p=i.kickAfterTimesSeen)},v,function(){if(""!==h.replace("/s/g","")){const e=i.whitelist.indexOf(h);e>-1&&i.whitelist.splice(e,1),i.whitelist.sort(),l(0,i.whitelist=[...new Set(i.whitelist)],i),l(5,h="")}},y,function(){if(""!==g.replace("/s/g","")){const e=i.blacklist.indexOf(g);e>-1&&i.blacklist.splice(e,1),i.blacklist.sort(),l(0,i.blacklist=[...new Set(i.blacklist)],i),l(6,g="")}},z,e=>l(0,i.enabled=!i.enabled,i),function(){d=this.value,l(1,d)},function(){f=this.value,l(2,f)},function(){m=this.value,l(3,m)},function(){p=this.value,l(4,p)},(e,t)=>l(5,h=e),e=>{"Enter"==e.key&&v()},function(){h=this.value,l(5,h)},(e,t)=>l(6,g=e),e=>{"Enter"==e.key&&y()},function(){g=this.value,l(6,g)},e=>z("days"),e=>z("name")]}return new class extends class{$destroy(){!function(e,t){const l=e.$$;null!==l.fragment&&(n(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const e=l.indexOf(t);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){var t;super(),R.getElementById("svelte-mlzco-style")||((t=d("style")).id="svelte-mlzco-style",t.textContent="table.svelte-mlzco,th.svelte-mlzco,td.svelte-mlzco{border:1px solid black;border-collapse:collapse}table.svelte-mlzco{background:#eee;width:50%;text-align:left}.selectedRow.svelte-mlzco{background:rgb(138, 255, 92)}.svelte-mlzco{font-size:medium}",c(R.head,t)),J(this,e,W,K,i,{},[-1,-1])}}({target:document.getElementById("ShareHelper")})}();

})();